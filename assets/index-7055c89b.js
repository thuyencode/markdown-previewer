import{r as a,u as L,j as t,t as P,c as R,U as C,D as S,X as O,F as T,G as M,a as _,R as F}from"./vendor-96a69376.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const e of n)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&u(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const e={};return n.integrity&&(e.integrity=n.integrity),n.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?e.credentials="include":n.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function u(n){if(n.ep)return;n.ep=!0;const e=r(n);fetch(n.href,e)}})();const k=a.createContext(null);function $({children:i}){const s=a.useRef(null),[r,u]=a.useState(!1),[n,e]=a.useState(!0),[o,c]=a.useState(""),f=L(o,300);function l(d){if(s.current==null)throw new Error("<Textarea></Textarea> not found!");const h=s.current,w=d.target.files?d.target.files[0]:null;if(w==null)throw new Error("No file provided!");if(!w.name.endsWith(".md")&&!w.name.endsWith(".markdown"))throw new Error(`${w.name} is not a Markdown file`);const x=new FileReader;function g(p){var E,y;const b=((y=(E=p.target)==null?void 0:E.result)==null?void 0:y.toString())||"";h.value=b,c(b)}x.addEventListener("load",g),x.readAsText(w,"UTF-8")}function m(){if(s.current==null)throw new Error("<Textarea></Textarea> not found!");const d=s.current,h=new Date,w=`my-markdown-${h.getDate()}_${h.getMonth()+1}_${h.getFullYear()}-${h.getHours()}_${h.getMinutes()}_${h.getSeconds()}.md`,x=new File([d.value],w,{type:"text/x-markdown"}),g=URL.createObjectURL(x),p=document.createElement("a");p.style.display="none",p.setAttribute("download",w),p.setAttribute("href",g),document.body.appendChild(p),p.click(),document.body.removeChild(p)}return t.jsx(k.Provider,{value:{markdown:f,setMarkdown:c,textEditorRef:s,isPreviewerOpen:r,setPreviewerOpen:u,isPreviewerLoading:n,setPreviewerLoading:e,handleFileChange:l,handleSave:m},children:i})}function N(){const i=a.useContext(k);if(i==null)throw new Error("Must be used within ContextProvider");return i}function U(...i){return P(R(i))}const v=a.forwardRef((i,s)=>{const r={default:"btn-default",primary:"btn-primary",secondary:"btn-secondary",outline:"btn-outline"},{variants:u,children:n,className:e,...o}=i;return t.jsx("button",{...o,className:U(r[u],e),ref:s,children:n})});function A(){const{handleFileChange:i,handleSave:s,isPreviewerOpen:r,setPreviewerOpen:u}=N(),n=a.useRef(null);return t.jsxs("header",{className:"fixed top-0 flex h-14 w-full items-center justify-between bg-white px-3 shadow-md dark:bg-slate-800",children:[t.jsxs("div",{className:"space-x-3",children:[t.jsxs(v,{variants:"primary",type:"button",id:"upload-button",onClick:()=>{var e;return(e=n.current)==null?void 0:e.click()},children:[t.jsx(C,{className:"h-5 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Upload"})]}),t.jsx("input",{className:"hidden",type:"file",id:"file-selector",accept:".md",ref:n,onChange:i}),t.jsxs(v,{variants:"secondary",type:"button",id:"save-button",onClick:s,children:[t.jsx(S,{className:"h-5 w-4"}),t.jsx("span",{className:"hidden sm:inline",children:"Save"})]}),t.jsxs(v,{className:`${r&&"hover:bg-red-500 hover:hover:inner-border-red-500"}`,id:"toggle-preview",variants:"outline",onClick:()=>u(!r),children:[t.jsx("i",{className:"icon-container",children:r?t.jsx(O,{className:"h-5 w-4"}):t.jsx(T,{className:"h-5 w-4"})}),t.jsx("span",{className:"ml-1 hidden capitalize sm:inline",children:r?"Close":"Preview"})]})]}),t.jsx("a",{target:"_blank",href:"https://github.com/thuyencode/markdown-previewer",children:t.jsxs(v,{variants:"default",children:[t.jsx(M,{className:"h-5 w-5"}),t.jsx("span",{className:"hidden sm:inline",children:"Star me on Github"})]})})]})}const D="modulepreload",H=function(i){return"/markdown-previewer/"+i},j={},z=function(s,r,u){if(!r||r.length===0)return s();const n=document.getElementsByTagName("link");return Promise.all(r.map(e=>{if(e=H(e),e in j)return;j[e]=!0;const o=e.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!u)for(let m=n.length-1;m>=0;m--){const d=n[m];if(d.href===e&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${e}"]${c}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":D,o||(l.as="script",l.crossOrigin=""),l.href=e,document.head.appendChild(l),o)return new Promise((m,d)=>{l.addEventListener("load",m),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>s()).catch(e=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=e,window.dispatchEvent(o),!o.defaultPrevented)throw e})};function B(){return t.jsx("div",{className:"absolute flex h-full w-full shrink items-center justify-center bg-slate-950 p-3 md:static",children:t.jsx("div",{className:"font-sans text-2xl capitalize text-white font-semibold",children:"Loading..."})})}const I=a.forwardRef((i,s)=>t.jsx("textarea",{...i,ref:s})),W=a.lazy(()=>z(()=>import("./MarkdownPreviewer-5a574ac8.js"),["assets/MarkdownPreviewer-5a574ac8.js","assets/vendor-96a69376.js","assets/MarkdownPreviewer-ccb7386d.css"]));function G(){const{markdown:i,setMarkdown:s,textEditorRef:r,isPreviewerOpen:u,isPreviewerLoading:n}=N(),e=a.useRef(null),o=a.useRef(0);return a.useEffect(()=>{if(r.current==null)return;const c=r.current;fetch("markdown-cheat-sheet.md").then(f=>f.text()).then(f=>c.value=f)},[]),a.useEffect(()=>{if(!u||r.current==null)return;const c=r.current;function f(){s(c.value)}return f(),c.addEventListener("input",f),()=>c.removeEventListener("input",f)},[u,s]),a.useEffect(()=>{if(n||r.current==null||e.current==null)return;const c=r.current,f=e.current;function l(m){m.stopPropagation(),clearTimeout(o.current);const d=m.target;if(d==null)return;const h=d===c?f:c;h.removeEventListener("scroll",l);const w=d.scrollTop/(d.scrollHeight-d.clientHeight)*100;h.scrollTop=w/100*(h.scrollHeight-h.clientHeight),o.current=window.setTimeout(()=>{h.addEventListener("scroll",l)},1e3)}return c.addEventListener("scroll",l),f.addEventListener("scroll",l),()=>{c.removeEventListener("scroll",l),f.removeEventListener("scroll",l)}},[n]),t.jsxs("main",{className:"relative mt-14 flex h-[calc(100%-3.5rem)] w-screen",children:[t.jsx(I,{className:"h-full w-full shrink resize-none scroll-smooth rounded-none bg-slate-50 p-3 font-mono focus:shadow-inner focus:outline-none dark:bg-gray-950 dark:text-white",id:"editor",name:"editor",placeholder:"Write down your Markdown...",maxLength:3e4,ref:r}),t.jsx(a.Suspense,{fallback:t.jsx(B,{}),children:u?t.jsx(W,{className:"markdown-body absolute h-full w-full shrink resize-none overflow-y-scroll scroll-smooth bg-white p-3 font-sans dark:bg-slate-950 md:static",id:"preview",preview:i,ref:e}):null})]})}function q(){return t.jsxs($,{children:[t.jsx(A,{}),t.jsx(G,{})]})}_.createRoot(document.getElementById("root")).render(t.jsx(F.StrictMode,{children:t.jsx(q,{})}));export{N as u};
